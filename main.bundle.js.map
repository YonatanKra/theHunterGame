{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/the-hunter-game/the-hunter-game.component.html","webpack:///./src/assets/ddicons1.png","webpack:///./src/assets/orc.png","webpack:///./src/the-hunter-game/entity/entity.js","webpack:///./src/the-hunter-game/state/manager.js","webpack:///./src/the-hunter-game/the-hunter-game.component.js","webpack:///./src/the-hunter-game/index.js","webpack:///./src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","SIZE","MOTION","Entity","x","y","image","this","lastMove","position","canvas","ctx","getContext","drawImage","fillStyle","canMove","fillRect","timeFromLastMove","strokeStyle","strokeRect","_x","resetTimer","_y","Date","getTime","timeDiff","Monster","super","draw","Math","random","round","length","ORC_IMAGE_ELEMENT","Image","src","state","monsters","xTilesMax","yTilesMax","multiplier","getRandomTileInRange","push","max","template","document","createElement","innerHTML","HUNTER_IMAGE_ELEMENT","TILE_SIZE","HTMLElement","root","attachShadow","appendChild","content","cloneNode","querySelector","stateManager","gameStopped","setEventListeners","setMenu","shadowRoot","getElementById","addEventListener","_","togglePlay","focus","emitEvent","e","motion","replace","hunter","limits","width","floor","height","currX","currY","killedMonster","forEach","monster","compareTiles","alert","clearRect","direction","splice","requestAnimationFrame","render","drawBoard","drawHero","drawMonsters","spawn","button","innerText","entity","entity1","entity2","JSON","stringify","getTile","eventName","data","options","bubbles","cancelable","detail","event","CustomEvent","dispatchEvent","character","tile","window","customElements","define","theHunterGame","body","append"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = \"<style>\\r\\n    body {\\r\\n        overflow: hidden;\\r\\n    }\\r\\n    canvas {\\r\\n        border: 2px solid black;\\r\\n    }\\r\\n</style>\\r\\n<div id=\\\"game-wrapper\\\">\\r\\n    <div id=\\\"menu\\\">\\r\\n        <button id=\\\"start\\\">התחל משחק</button>\\r\\n        <div id=\\\"hitPoints\\\"></div>\\r\\n        <div id=\\\"level\\\"></div>\\r\\n        <div id=\\\"experience\\\"></div>\\r\\n    </div>\\r\\n    <canvas tabindex=\\\"2\\\"\\r\\n            height=\\\"700\\\"\\r\\n            width=\\\"1295\\\"></canvas>\\r\\n</div>\\r\\n\";","module.exports = __webpack_public_path__ + \"83f811c698321fc49e530c2fa374f800.png\";","module.exports = __webpack_public_path__ + \"0b9f8db6560538be4dc6550443c4290e.png\";","import {HunterGame} from \"../the-hunter-game.component\";\r\n\r\nconst SIZE = 64;\r\n\r\nconst MOTION = [\"Up\", \"Down\", \"Left\", \"Right\"];\r\n\r\nexport class Entity {\r\n    constructor(x, y, image) {\r\n        this.image = image;\r\n        this.lastMove = 0;\r\n        this.position(x, y);\r\n    }\r\n\r\n    draw(canvas) {\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(this.image, this.x, this.y, SIZE, SIZE);\r\n\r\n        ctx.fillStyle = this.canMove ? \"#00FF00\" : \"#fff000\";\r\n        ctx.fillRect(this.x, this.y + 4, (this.timeFromLastMove() / 1000) * SIZE, 4);\r\n        ctx.strokeStyle = \"#ff0000\";\r\n        ctx.strokeRect(this.x, this.y + 4, SIZE, 4);\r\n    }\r\n\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    set x(x) {\r\n        if (!this.canMove) {\r\n            return false;\r\n        }\r\n        this._x = x;\r\n        this.resetTimer();\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    set y(y) {\r\n        if (!this.canMove) {\r\n            return false;\r\n        }\r\n        this._y = y;\r\n        this.resetTimer();\r\n    }\r\n\r\n    position(x, y) {\r\n        this._x = x;\r\n        this._y = y;\r\n    }\r\n\r\n    resetTimer() {\r\n        this.lastMove = new Date().getTime();\r\n    }\r\n\r\n    timeFromLastMove() {\r\n        const timeDiff = new Date().getTime() - this.lastMove;\r\n        return timeDiff > 1000 ? 1000 : timeDiff;\r\n    }\r\n\r\n    get canMove() {\r\n        return this.timeFromLastMove() >= 1000;\r\n    }\r\n}\r\n\r\nexport class Monster extends Entity {\r\n    constructor(x, y, image) {\r\n        super(x, y, image);\r\n    }\r\n\r\n    draw(canvas) {\r\n        super.draw(canvas);\r\n        if (this.canMove && Math.random() > .95) {\r\n            return MOTION[Math.round(Math.random() * (MOTION.length - 1))];\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","import { Monster } from '../entity/entity';\r\nimport * as ORC_IMAGE from \"../../assets/orc.png\";\r\n\r\nconst ORC_IMAGE_ELEMENT = new Image(75, 75);\r\nORC_IMAGE_ELEMENT.src = ORC_IMAGE;\r\n\r\nexport class StateManager {\r\n    constructor() {\r\n        this.state = {\r\n            monsters: []\r\n        };\r\n    }\r\n\r\n    get monsters() {\r\n        return this.state.monsters;\r\n    }\r\n\r\n    spawn(xTilesMax, yTilesMax, multiplier) {\r\n        const x = StateManager.getRandomTileInRange(xTilesMax) * multiplier + 8;\r\n        const y = StateManager.getRandomTileInRange(yTilesMax) * multiplier + 8;\r\n\r\n        return this.monsters[this.monsters.push(new Monster(x, y, ORC_IMAGE_ELEMENT))-1];\r\n    }\r\n\r\n    static getRandomTileInRange(max) {\r\n        return Math.round(Math.random() * max);\r\n    }\r\n}\r\n","// setup a template\r\nimport * as templateString from './the-hunter-game.component.html';\r\nimport * as HUNTER_IMAGE from \"../assets/ddicons1.png\";\r\n\r\nimport {Entity} from \"./entity/entity\";\r\nimport {StateManager} from \"./state/manager\";\r\n\r\n// setup a template element with our template\r\nconst template = document.createElement('template');\r\ntemplate.innerHTML = templateString;\r\n\r\nconst HUNTER_IMAGE_ELEMENT = new Image(75, 75);\r\nHUNTER_IMAGE_ELEMENT.src = HUNTER_IMAGE;\r\n\r\nconst TILE_SIZE = 80;\r\n\r\nexport class HunterGame extends HTMLElement {\r\n    constructor() {\r\n        super();\r\n\r\n        this.root = this.attachShadow({mode: 'open'});\r\n        this.root.appendChild(template.content.cloneNode(true));\r\n        this.canvas = this.root.querySelector('canvas');\r\n        this.ctx = this.canvas.getContext('2d');\r\n\r\n        this.stateManager = new StateManager();\r\n        this.gameStopped = true;\r\n        this.setEventListeners();\r\n        this.setMenu();\r\n    }\r\n\r\n    setMenu() {\r\n        const button = this.shadowRoot.getElementById('start');\r\n        button.addEventListener('click', _ => {\r\n            this.togglePlay();\r\n        });\r\n    }\r\n\r\n    setEventListeners() {\r\n        this.canvas.addEventListener('click', _ => {\r\n            this.canvas.focus();\r\n            HunterGame.emitEvent(this, 'canvasClicked', this.stateManager.state);\r\n        });\r\n\r\n        this.canvas.addEventListener('keydown', e => {\r\n            if (this.gameStopped) {\r\n                return;\r\n            }\r\n\r\n            HunterGame.motion(e.key.replace('Arrow', ''), this.hunter, this.limits);\r\n\r\n            HunterGame.emitEvent(this, 'canvasKeyDown', this.stateManager.state);\r\n        });\r\n    }\r\n\r\n    drawBoard() {\r\n        const width = this.width = Math.floor(this.canvas.width / TILE_SIZE);\r\n        const height = this.height = Math.floor(this.canvas.height / TILE_SIZE);\r\n\r\n        for (let x = 0; x < width; x++) {\r\n            let currX = x * TILE_SIZE;\r\n            for (let y = 0; y < height; y++) {\r\n                let currY = y * TILE_SIZE;\r\n                this.ctx.strokeStyle = \"#FF0000\";\r\n                this.ctx.strokeRect(currX, currY, TILE_SIZE, TILE_SIZE);\r\n            }\r\n        }\r\n    }\r\n\r\n    drawHero() {\r\n        if (!this.hunter) {\r\n            const x = Math.floor(Math.random() * (this.width - 1)) * TILE_SIZE + 8;\r\n            const y = Math.floor(Math.random() * (this.height - 1)) * TILE_SIZE + 8;\r\n            this.hunter = new Entity(x, y, HUNTER_IMAGE_ELEMENT);\r\n        }\r\n        this.hunter.draw(this.canvas);\r\n    }\r\n\r\n    drawMonsters() {\r\n        let killedMonster = null;\r\n        this.stateManager.monsters.forEach((monster, i) => {\r\n            // collision\r\n            if (HunterGame.compareTiles(this.hunter, monster)) {\r\n                const hunterAttack = Math.round(Math.random() * 20);\r\n                const monsterAttack = Math.round(Math.random() * 20);\r\n\r\n                if (hunterAttack >= monsterAttack) {\r\n                    // kill monster\r\n                    killedMonster = i;\r\n                    alert('הרגת את האורק!!! כל הכבוד!!!')\r\n                } else {\r\n                    alert('דריזט מת! המשחק נגמר!');\r\n                    this.hunter = null;\r\n                    this.stateManager.monsters.length = 0;\r\n                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n                    this.togglePlay();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            const direction = monster.draw(this.canvas);\r\n            if (direction) {\r\n                HunterGame.motion(direction, monster, this.limits);\r\n            }\r\n        });\r\n\r\n        if (killedMonster != null) {\r\n            this.stateManager.monsters.splice(killedMonster, 1);\r\n            killedMonster = null\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.gameStopped) {\r\n            return;\r\n        }\r\n        this.canvas.focus();\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        requestAnimationFrame(() => this.render());\r\n\r\n        this.drawBoard();\r\n        this.drawHero();\r\n        this.drawMonsters();\r\n\r\n        this.spawn();\r\n    }\r\n\r\n    spawn() {\r\n        if (this.stateManager.monsters.length > 5 || Math.random() < .5) {\r\n            return;\r\n        }\r\n        this.stateManager.spawn(this.width - 1, this.height - 1, TILE_SIZE);\r\n    }\r\n\r\n    togglePlay() {\r\n        const button = this.shadowRoot.getElementById('start');\r\n        this.gameStopped = !this.gameStopped;\r\n        this.render();\r\n        button.innerText = this.gameStopped ? 'התחל משחק' : 'עצור משחק';\r\n    }\r\n\r\n    get limits() {\r\n        return {\r\n            height: this.height,\r\n            width: this.width\r\n        }\r\n    }\r\n\r\n    static getTile(entity) {\r\n        return {\r\n            x: Math.floor(entity.x / TILE_SIZE),\r\n            y: Math.floor(entity.y / TILE_SIZE)\r\n        }\r\n    }\r\n\r\n    static compareTiles(entity1, entity2) {\r\n        return JSON.stringify(HunterGame.getTile(entity1)) === JSON.stringify(HunterGame.getTile(entity2));\r\n    }\r\n\r\n    static emitEvent(ctx, eventName, data, options = {bubbles: false, cancelable: false}) {\r\n        options.detail = data;\r\n        const event = new CustomEvent(eventName, options);\r\n        ctx.dispatchEvent(event);\r\n    }\r\n\r\n    static motion(direction, character, limits) {\r\n        const tile = HunterGame.getTile(character);\r\n        switch (direction) {\r\n            case \"Down\":\r\n                if (tile.y === limits.height - 1) return;\r\n                character.y += TILE_SIZE;\r\n                break;\r\n            case \"Up\":\r\n                if (tile.y === 0) return;\r\n                character.y -= TILE_SIZE;\r\n                break;\r\n            case \"Left\":\r\n                if (tile.x === 0) return;\r\n                character.x -= TILE_SIZE;\r\n                break;\r\n            case \"Right\":\r\n                if (tile.x === limits.width - 1) return;\r\n                character.x += TILE_SIZE;\r\n                break;\r\n        }\r\n    }\r\n}\r\n","import { HunterGame } from './the-hunter-game.component';\r\n\r\n// configure a custom element for our game\r\nwindow.customElements.define('hunter-game', HunterGame);\r\n","import './the-hunter-game';\r\n// add it to the DOM\r\nconst theHunterGame = document.createElement('hunter-game');\r\ndocument.body.append(theHunterGame);\r\n"],"sourceRoot":""}