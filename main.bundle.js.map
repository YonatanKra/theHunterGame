{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/the-hunter-game/the-hunter-game.component.html","webpack:///./src/assets/ddicons1.png","webpack:///./src/assets/orc.png","webpack:///./src/the-hunter-game/entity/entity.js","webpack:///./src/the-hunter-game/state/manager.js","webpack:///./src/the-hunter-game/the-hunter-game.component.js","webpack:///./src/the-hunter-game/index.js","webpack:///./src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","SIZE","MOTION","sign","limit","Entity","x","y","image","this","lastMove","position","canvas","ctx","getContext","drawImage","fillStyle","canMove","fillRect","timeFromLastMove","strokeStyle","strokeRect","_x","resetTimer","_y","Date","getTime","timeDiff","Monster","super","draw","directions","keys","directionString","Math","round","random","length","direction","currentPos","ORC_IMAGE_ELEMENT","Image","src","monsters","heroes","xTilesMax","yTilesMax","multiplier","getRandomTileInRange","push","max","template","document","createElement","innerHTML","HUNTER_IMAGE_ELEMENT","TILE_SIZE","HTMLElement","root","attachShadow","appendChild","content","cloneNode","querySelector","manager","gameStopped","setEventListeners","setMenu","shadowRoot","getElementById","addEventListener","_","togglePlay","focus","e","tile","getTile","hunter","height","width","floor","currX","currY","clearRect","requestAnimationFrame","render","drawBoard","drawCharacter","killedMonster","forEach","monster","compareTiles","alert","splice","spawn","button","innerText","entity","entity1","entity2","JSON","stringify","window","customElements","define","theHunterGame","body","append"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = \"<style>\\r\\n    body {\\r\\n        overflow: hidden;\\r\\n    }\\r\\n    canvas {\\r\\n        border: 2px solid black;\\r\\n    }\\r\\n</style>\\r\\n<div id=\\\"game-wrapper\\\">\\r\\n    <div id=\\\"menu\\\">\\r\\n        <button id=\\\"start\\\">התחל משחק</button>\\r\\n        <div id=\\\"hitPoints\\\"></div>\\r\\n        <div id=\\\"level\\\"></div>\\r\\n        <div id=\\\"experience\\\"></div>\\r\\n    </div>\\r\\n    <canvas tabindex=\\\"2\\\"\\r\\n            height=\\\"700\\\"\\r\\n            width=\\\"1295\\\"></canvas>\\r\\n</div>\\r\\n\";","module.exports = __webpack_public_path__ + \"83f811c698321fc49e530c2fa374f800.png\";","module.exports = __webpack_public_path__ + \"0b9f8db6560538be4dc6550443c4290e.png\";","const SIZE = 64;\r\n\r\nconst MOTION = {\r\n    \"UP\": {\r\n        sign: -1,\r\n        limit: 0,\r\n        property: 'y'\r\n    },\r\n    \"LEFT\": {\r\n        sign: -1,\r\n        limit: 0,\r\n        property: 'x'\r\n    },\r\n    \"RIGHT\": {\r\n        sign: 1,\r\n        limit: 'width',\r\n        property: 'x'\r\n    },\r\n    \"DOWN\": {\r\n        sign: 1,\r\n        limit: 'height',\r\n        property: 'y'\r\n    }\r\n};\r\n\r\nexport class Entity {\r\n    constructor(x, y, image) {\r\n        this.image = image;\r\n        this.lastMove = 0;\r\n        this.position(x, y);\r\n    }\r\n\r\n    draw(canvas) {\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(this.image, this.x, this.y, SIZE, SIZE);\r\n\r\n        ctx.fillStyle = this.canMove ? \"#00FF00\" : \"#fff000\";\r\n        ctx.fillRect(this.x, this.y + 4, (this.timeFromLastMove() / 1000) * SIZE, 4);\r\n        ctx.strokeStyle = \"#ff0000\";\r\n        ctx.strokeRect(this.x, this.y + 4, SIZE, 4);\r\n    }\r\n\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    set x(x) {\r\n        if (!this.canMove) {\r\n            return false;\r\n        }\r\n        this._x = x;\r\n        this.resetTimer();\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    set y(y) {\r\n        if (!this.canMove) {\r\n            return false;\r\n        }\r\n        this._y = y;\r\n        this.resetTimer();\r\n    }\r\n\r\n    position(x, y) {\r\n        this._x = x;\r\n        this._y = y;\r\n    }\r\n\r\n    resetTimer() {\r\n        this.lastMove = new Date().getTime();\r\n    }\r\n\r\n    timeFromLastMove() {\r\n        const timeDiff = new Date().getTime() - this.lastMove;\r\n        return timeDiff > 1000 ? 1000 : timeDiff;\r\n    }\r\n\r\n    get canMove() {\r\n        return this.timeFromLastMove() >= 1000;\r\n    }\r\n}\r\n\r\nexport class Monster extends Entity {\r\n    constructor(x, y, image) {\r\n        super(x, y, image);\r\n    }\r\n\r\n    draw(canvas) {\r\n        super.draw(canvas);\r\n        if (this.canMove) {\r\n            const directions = Object.keys(MOTION);\r\n            const directionString = directions[Math.round(Math.random() * (directions.length - 1))];\r\n            const direction = MOTION[directionString];\r\n            const currentPos = this[direction.property];\r\n            if (currentPos - 80 < 0 || (currentPos + 80) > canvas[direction.limit] - 80) {\r\n                return;\r\n            }\r\n            this[direction.property] += 80 * direction.sign;\r\n        }\r\n    }\r\n}\r\n","import { Monster } from '../entity/entity';\r\nimport * as ORC_IMAGE from \"../../assets/orc.png\";\r\n\r\nconst ORC_IMAGE_ELEMENT = new Image(75, 75);\r\nORC_IMAGE_ELEMENT.src = ORC_IMAGE;\r\n\r\nexport class StateManager {\r\n    constructor() {\r\n        this.monsters = [];\r\n        this.heroes = [];\r\n    }\r\n\r\n    spawn(xTilesMax, yTilesMax, multiplier) {\r\n        const x = StateManager.getRandomTileInRange(xTilesMax) * multiplier - 72;\r\n        const y = StateManager.getRandomTileInRange(yTilesMax) * multiplier - 72;\r\n\r\n        return this.monsters[this.monsters.push(new Monster(x, y, ORC_IMAGE_ELEMENT))-1];\r\n    }\r\n\r\n    static getRandomTileInRange(max) {\r\n        return Math.round(Math.random() * max);\r\n    }\r\n}\r\n","// setup a template\r\nimport * as templateString from './the-hunter-game.component.html';\r\nimport * as HUNTER_IMAGE from \"../assets/ddicons1.png\";\r\n\r\nimport {Entity} from \"./entity/entity\";\r\nimport {StateManager} from \"./state/manager\";\r\n\r\n// setup a template element with our template\r\nconst template = document.createElement('template');\r\ntemplate.innerHTML = templateString;\r\n\r\nconst HUNTER_IMAGE_ELEMENT = new Image(75, 75);\r\nHUNTER_IMAGE_ELEMENT.src = HUNTER_IMAGE;\r\n\r\nconst TILE_SIZE = 80;\r\nexport class HunterGame extends HTMLElement {\r\n    constructor() {\r\n        super();\r\n\r\n        this.root = this.attachShadow({mode: 'open'});\r\n        this.root.appendChild(template.content.cloneNode(true));\r\n        this.canvas = this.root.querySelector('canvas');\r\n        this.ctx = this.canvas.getContext('2d');\r\n\r\n        this.manager = new StateManager();\r\n        this.gameStopped = true;\r\n        this.setEventListeners();\r\n        this.setMenu();\r\n    }\r\n\r\n    setMenu() {\r\n        const button = this.shadowRoot.getElementById('start');\r\n        button.addEventListener('click', _ => {\r\n           this.togglePlay();\r\n        });\r\n    }\r\n\r\n    setEventListeners() {\r\n        this.canvas.addEventListener('click', _ => {\r\n           this.canvas.focus();\r\n        });\r\n\r\n        this.canvas.addEventListener('keydown' , e => {\r\n            if (this.gameStopped) {\r\n                return;\r\n            }\r\n            const tile = HunterGame.getTile(this.hunter);\r\n           switch (e.key){\r\n               case \"ArrowDown\":\r\n                   if (tile.y === this.height - 1) return;\r\n                   this.hunter.y += TILE_SIZE;\r\n                    break;\r\n               case \"ArrowUp\":\r\n                   if (tile.y === 0) return;\r\n                   this.hunter.y -= TILE_SIZE;\r\n                   break;\r\n               case \"ArrowLeft\":\r\n                   if (tile.x === 0) return;\r\n                   this.hunter.x -= TILE_SIZE;\r\n                   break;\r\n               case \"ArrowRight\":\r\n                   if (tile.x === this.width - 1) return;\r\n                   this.hunter.x += TILE_SIZE;\r\n                   break;\r\n           }\r\n        });\r\n    }\r\n\r\n    drawBoard() {\r\n        const width = this.width = Math.floor(this.canvas.width / TILE_SIZE);\r\n        const height = this.height = Math.floor(this.canvas.height / TILE_SIZE);\r\n\r\n        for(let x = 0; x < width ; x++) {\r\n            let currX = x * TILE_SIZE;\r\n            for(let y = 0; y < height; y++) {\r\n                let currY = y * TILE_SIZE;\r\n                this.ctx.strokeStyle = \"#FF0000\";\r\n                this.ctx.strokeRect(currX, currY, TILE_SIZE, TILE_SIZE);\r\n            }\r\n        }\r\n    }\r\n\r\n    drawCharacter() {\r\n        if (!this.hunter) {\r\n            const x = Math.floor(Math.random() * this.width - 1) * TILE_SIZE + 8;\r\n            const y = Math.floor(Math.random() * this.height - 1) * TILE_SIZE + 8;\r\n            this.hunter = new Entity(x, y, HUNTER_IMAGE_ELEMENT);\r\n        }\r\n        this.hunter.draw(this.canvas);\r\n    }\r\n\r\n    render() {\r\n        if (this.gameStopped) {\r\n            return;\r\n        }\r\n        this.canvas.focus();\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        requestAnimationFrame(() => this.render());\r\n\r\n        this.drawBoard();\r\n        this.drawCharacter();\r\n        let killedMonster = null;\r\n        this.manager.monsters.forEach((monster, i) => {\r\n            // collision\r\n            if (HunterGame.compareTiles(this.hunter, monster)) {\r\n                const hunterAttack = Math.round(Math.random() * 20);\r\n                const monsterAttack = Math.round(Math.random() * 20);\r\n\r\n                if (hunterAttack >= monsterAttack) {\r\n                    // kill monster\r\n                    killedMonster = i;\r\n                    alert('הרגת את האורק!!! כל הכבוד!!!')\r\n                } else {\r\n                    alert('דריזט מת! המשחק נגמר!');\r\n                    this.hunter = null;\r\n                    this.manager.monsters.length = 0;\r\n                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n                    this.togglePlay();\r\n                    return;\r\n                }\r\n            }\r\n            monster.draw(this.canvas);\r\n        });\r\n\r\n        if (killedMonster != null) {\r\n            this.manager.monsters.splice(killedMonster, 1);\r\n            killedMonster = null\r\n        }\r\n\r\n        this.spawn();\r\n    }\r\n\r\n    spawn() {\r\n        if (this.manager.monsters.length > 5 || Math.random() < .5) {\r\n            return;\r\n        }\r\n        this.manager.spawn(this.width - 1, this.height - 1, TILE_SIZE);\r\n    }\r\n    togglePlay() {\r\n        const button = this.shadowRoot.getElementById('start');\r\n        this.gameStopped = !this.gameStopped;\r\n        this.render();\r\n        button.innerText = this.gameStopped ? 'התחל משחק': 'עצור משחק';\r\n    }\r\n    static getTile(entity) {\r\n        return {\r\n            x: Math.floor(entity.x / TILE_SIZE),\r\n            y: Math.floor(entity.y / TILE_SIZE)\r\n        }\r\n    }\r\n\r\n    static compareTiles(entity1, entity2) {\r\n        return JSON.stringify(HunterGame.getTile(entity1)) === JSON.stringify(HunterGame.getTile(entity2));\r\n    }\r\n}\r\n","import { HunterGame } from './the-hunter-game.component';\r\n\r\n// configure a custom element for our game\r\nwindow.customElements.define('hunter-game', HunterGame);\r\n","import './the-hunter-game';\r\n// add it to the DOM\r\nconst theHunterGame = document.createElement('hunter-game');\r\ndocument.body.append(theHunterGame);\r\n"],"sourceRoot":""}